<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="keywords" content="SignUp, Login, Register">
    <meta name="keywords" content="Sign up, Sign in">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goal Goals - SDGs Login</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="https://noticon-static.tammolo.com/dgggcrkxq/image/upload/v1575058476/noticon/b7vmbdgm9krhkd6ejtjv.svg" />
    <!--Bootstrap Css-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <!--    &lt;!&ndash;Font-aweome&ndash;&gt;-->
    <!--    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">-->
    <!--    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">-->
    <!--Custom Css-->
    <link type="text/css" rel="stylesheet" href="/css/loginstyles.css" />

    <style>
        .field-error {
            border-color: #dc3545;
            color: #dc3545;
        }
    </style>

</head>

<body>
<section class="login_section">
    <div class="container outer_container accounts_container">
        <div class="row h-100">
            <div class="col col-sm-12 col-md-12 col-lg-8 m-0 p-0 w-100 h-100 accounts_col">
                <div class="accounts_image w-100 h-100">
                    <a href="/"><img src="/img/login.jpg" alt="accounts_image" class="img-fluid w-100 h-100" />
                    </a>
                </div>
                <!--accounts_image-->
            </div>
            <!--account_col-->
            <div class="col col-sm-12 col-md-12 col-lg-4 m-0 p-0 accounts_col">
                <div class="accounts_forms w-100 h-100" id="signup">
<!--                    <div class="title mt-4 p-4 w-100">-->
<!--                        <h2>회원가입</h2>-->
<!--                    </div>-->
                    <!--title-->
                    <form action="join.html" th:action th:object="${userDTO}" method="post" class="form w-100 p-4" >
                        <div class="form-group">
                            <label for="id">아이디</label>
                            <input type="text" id="id" th:field="*{id}" th:errorclass="field-error" class="form-control" placeholder="아이디" />
                            <div class="field-error" th:errors="*{id}">
                                아이디 오류
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="password">비밀번호</label>
                            <input type="password" id="password" th:field="*{password}" th:errorclass="field-error" class="form-control" placeholder="비밀번호" />
                            <div class="field-error" th:errors="*{password}">
                                비밀번호 오류
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="passwordcheck">비밀번호 확인</label>
                            <input type="password"  id="passwordcheck" th:field="*{passwordCheck}" th:errorclass="field-error" class="form-control" placeholder="비밀번호 확인" />
                            <div class="field-error" th:errors="*{passwordCheck}">
                                비밀번호 확인 오류
                            </div>
                        </div>

                        <div class="row">
                            <div class="col col-sm-12 col-md-12 col-lg-6 m-0">
                                <div class="form-group">
                                    <label for="name">이름</label>
                                    <input type="text" id="name" th:field="*{name}" th:errorclass="field-error" class="form-control" placeholder="이름" />
                                    <div class="field-error" th:errors="*{name}">
                                        이름 오류
                                    </div>
                                </div>
                            </div>
                            <div class="col col-sm-12 col-md-12 col-lg-6 m-0">
                                <div class="form-group">
                                    <label for="email">이메일</label>
                                    <input type="email" id="email" th:field="*{email}" th:errorclass="field-error" class="form-control" placeholder="이메일" />
                                    <div class="field-error" th:errors="*{email}">
                                        이메일 오류
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col col-sm-12 col-md-12 col-lg-6 m-0">
                                <div class="form-group">
                                    <label for="emailCheck">이메일 확인</label>
                                    <input type="text" id="emailCheck" th:field="*{emailCheck}" th:errorclass="field-error" class="form-control" placeholder="이메일 확인" />
                                    <div class="field-error" th:errors="*{emailCheck}">
                                        이메일 체크 오류
                                    </div>
                                    <span id="emailCheckValidation" class="field-error"></span>
                                </div>
                            </div>
                            <div class="col-lg-6 d-flex align-items-center">
                                    <button type="button" class="btn btn-primary email_btn w-100" id="sendMail">인증하기</button>
                            </div>
                        </div>
                            <button type="submit" class="btn btn-primary register_btn w-100">회원가입</button>
                    </form>

                    <div class="already_member_box">
                        <a href="/users/login"><p class="text-center" id="to_login">이미 회원가입이 되어있습니다.(로그인)</p></a>
                    </div>
                </div>
            </div>
            <!--account_col-->
        </div>
        <!--row-->
    </div>
    <!--accounts_container-->
</section>
<!--login_section-->

<!-- Popper JS -->
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<!-- Latest compiled JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!--Custom Js-->
<!--<script type="text/javascript" src="/js/login.js"></script>-->
<script type="text/javascript">
    const emailCheckInput = document.querySelector('#emailCheck');
    emailCheckInput.addEventListener('input', validateEmailCheck);
    let key = "";
    $("#sendMail").click(function() {// 메일 입력 유효성 검사

        $.ajax({
            type : "Post",
            url : "./checkMail",
            data : {
                email:$('#email').val()
            },
            success:function(result){
                console.log(result)
                alert("인증번호가 발송되었습니다.");
                key = result;
            },
            error:function(){
                console.log()
                alert("인증번호 발송이 실패하였습니다.")
            }
        })
    });

    function validateEmailCheck() {
        const emailCheck = this.value;

        if (emailCheck === key) {
            // 이메일 인증 성공
            document.querySelector('#emailCheckValidation').textContent = '인증 성공';
            $("#submitButton").prop("disabled", false);
        } else {
            // 이메일 인증 실패
            document.querySelector('#emailCheckValidation').textContent = '인증 실패';
            $("#submitButton").prop("disabled", true);
        }
    }


</script>
</body>

</html>